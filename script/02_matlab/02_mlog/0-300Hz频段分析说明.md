# 0-300Hz频段能量分布分析说明

## 分析目标
专门分析0-300Hz频段的能量分布，详细对比滤波前后的区别，为四轴飞行器IMU滤波优化提供精确的频段分析。

## 频段划分

### 1. 信号频段（0-50Hz）
- **0-10Hz**：悬停和慢速运动
  - 四轴飞行器悬停时的主要运动频率
  - 姿态微调和小幅度机动
  - 期望：滤波后能量保持或略有减少

- **10-20Hz**：姿态调整
  - 中等幅度的姿态调整
  - 飞行模式切换
  - 期望：滤波后能量基本保持

- **20-50Hz**：机动飞行
  - 快速机动和急转弯
  - 高动态飞行模式
  - 期望：滤波后能量基本保持

### 2. 噪声频段（50-300Hz）
- **50-100Hz**：电机振动低频
  - 电机旋转产生的低频振动
  - 螺旋桨不平衡引起的振动
  - 期望：滤波后能量显著减少

- **100-200Hz**：电机振动高频
  - 电机高速旋转产生的高频振动
  - 螺旋桨气动噪声
  - 期望：滤波后能量显著减少

- **200-300Hz**：传感器噪声
  - 传感器电子噪声
  - 量化误差
  - 期望：滤波后能量显著减少

## 分析指标

### 1. 能量分布
- **绝对能量**：各频段的总能量值
- **相对占比**：各频段能量在0-300Hz总能量中的百分比
- **能量变化**：滤波前后能量的绝对变化和百分比变化

### 2. 功率谱密度
- **平均PSD**：各频段的平均功率谱密度
- **峰值频率**：各频段内功率谱密度最大的频率

### 3. 滤波效果评估
- **信号保持率**：0-50Hz频段能量的保持程度
- **噪声抑制率**：50-300Hz频段能量的减少程度
- **频段平衡**：各频段能量分布的平衡性

## 输出内容

### 1. 详细数据表格
```
频段      滤波前能量    滤波后能量    能量变化      滤波前占比    滤波后占比
----      ---------    ---------    ---------    ---------    ---------
0-10Hz    1.23e-05     1.20e-05     -3.0e-07    15.2%        16.8%
10-20Hz   2.45e-05     2.40e-05     -5.0e-07    30.1%        33.6%
20-50Hz   1.80e-05     1.75e-05     -5.0e-07    22.1%        24.5%
50-100Hz  1.20e-05     0.80e-05     -4.0e-07    14.7%        11.2%
100-200Hz 0.80e-05     0.40e-05     -4.0e-07    9.8%         5.6%
200-300Hz 0.45e-05     0.20e-05     -2.5e-07    5.5%         2.8%
```

### 2. 可视化图表
- **柱状图对比**：各频段滤波前后的能量占比对比
- **数值标签**：每个柱子上显示具体的百分比数值
- **颜色区分**：红色表示滤波前，蓝色表示滤波后

### 3. 滤波效果评估
- **优秀**：噪声频段（50-300Hz）能量减少>10%
- **良好**：噪声频段能量减少5-10%
- **一般**：噪声频段能量减少1-5%
- **较差**：噪声频段能量减少<1%或信号频段能量显著减少

## 分析意义

### 1. 滤波效果验证
- 验证滤波器是否有效抑制了噪声频段
- 确认滤波器是否过度影响了信号频段
- 评估滤波器的频域特性

### 2. 参数优化指导
- 根据各频段能量变化调整滤波器参数
- 优化截止频率和滤波器阶数
- 平衡信号保持和噪声抑制

### 3. 飞行性能预测
- 预测滤波后IMU数据的质量
- 评估对飞行控制性能的影响
- 指导控制算法的参数调整

## 使用建议

### 1. 理想滤波效果
- **0-50Hz**：能量变化在±5%以内
- **50-100Hz**：能量减少10-30%
- **100-200Hz**：能量减少20-50%
- **200-300Hz**：能量减少30-70%

### 2. 参数调整策略
- 如果信号频段能量减少过多：提高截止频率
- 如果噪声频段能量减少不足：降低截止频率或增加滤波器阶数
- 如果某些频段能量增加：检查滤波器设计或硬件问题

### 3. 性能监控
- 定期分析0-300Hz频段能量分布
- 监控滤波效果的稳定性
- 根据飞行任务调整滤波参数

这个分析工具能够为您的四轴飞行器IMU滤波提供精确的频段分析，帮助您优化滤波参数，提升飞行性能。
